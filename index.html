<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Treasure Map Book Prank</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap');

  body, html {
    margin: 0; padding: 0; height: 100%;
    background: #6f4e37 url('https://i.imgur.com/maHmlvI.jpg') no-repeat center center fixed;
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'UnifrakturCook', cursive;
    user-select: none;
  }

  /* Book container */
  .book-container {
    perspective: 1500px;
    width: 320px;
    height: 420px;
  }

  /* Closed book cover */
  .book-cover {
    width: 320px;
    height: 420px;
    background: linear-gradient(135deg, #d18a49 0%, #a26323 100%);
    border-radius: 20px;
    box-shadow:
      inset 0 0 15px 6px #7b4e16,
      0 15px 30px rgba(0,0,0,0.8);
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  /* Old parchment texture overlay */
  .book-cover::before {
    content: "";
    position: absolute;
    inset: 0;
    background: url('https://i.imgur.com/IyfpTtA.png') repeat;
    opacity: 0.3;
    pointer-events: none;
    mix-blend-mode: multiply;
  }

  /* Title on cover */
  .cover-text {
    position: absolute;
    bottom: 40px;
    width: 100%;
    text-align: center;
    font-size: 30px;
    color: #fff4d1;
    text-shadow: 1px 1px 3px #3e270a;
    letter-spacing: 3px;
  }

  /* Book inner page */
  .book-page {
    width: 320px;
    height: 420px;
    background: #f3e4c9 url('https://i.imgur.com/PUlqFlF.png') repeat;
    border-radius: 20px 0 0 20px;
    box-shadow: inset 5px 0 15px rgba(0,0,0,0.15);
    position: absolute;
    top: 0;
    left: 0;
    transform-style: preserve-3d;
    backface-visibility: hidden;
    overflow: hidden;
    padding: 30px 20px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Mirrored text container */
  .page-text {
    font-size: 24px;
    line-height: 1.4;
    color: #5b3e1f;
    text-align: center;
    max-width: 260px;
    /* Start flipped horizontally (mirror) */
    transform: scaleX(-1);
    transition: transform 1s ease;
    user-select: none;
  }

  /* The opened book with flipping animation */
  .book-flip {
    width: 320px;
    height: 420px;
    position: relative;
    transform-style: preserve-3d;
    cursor: default;
  }

  /* Right page (the flipping cover) */
  .book-flip .cover-front {
    position: absolute;
    width: 320px;
    height: 420px;
    background: linear-gradient(135deg, #d18a49 0%, #a26323 100%);
    border-radius: 20px;
    box-shadow:
      inset 0 0 15px 6px #7b4e16,
      0 15px 30px rgba(0,0,0,0.8);
    backface-visibility: hidden;
    transform-origin: left center;
    background-image: url('https://i.imgur.com/IyfpTtA.png');
    background-repeat: repeat;
    background-size: contain;
    z-index: 2;
    transition: box-shadow 0.3s ease;
  }

  /* Old paper texture overlay on cover front */
  .book-flip .cover-front::before {
    content: "";
    position: absolute;
    inset: 0;
    background: url('https://i.imgur.com/IyfpTtA.png') repeat;
    opacity: 0.3;
    pointer-events: none;
    mix-blend-mode: multiply;
  }

  /* Left page (the inner page) */
  .book-flip .page-back {
    position: absolute;
    width: 320px;
    height: 420px;
    background: #f3e4c9 url('https://i.imgur.com/PUlqFlF.png') repeat;
    border-radius: 20px 0 0 20px;
    box-shadow: inset 5px 0 15px rgba(0,0,0,0.15);
    padding: 30px 20px;
    color: #5b3e1f;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    line-height: 1.4;
    user-select: none;
    z-index: 1;
    backface-visibility: hidden;
  }

  /* The flipping effect */
  .flipping {
    animation: flipPage 1.5s forwards ease-in-out;
  }

  /* Flip from right to left */
  @keyframes flipPage {
    0% {
      transform: rotateY(0deg);
      box-shadow:
        inset 0 0 15px 6px #7b4e16,
        0 15px 30px rgba(0,0,0,0.8);
    }
    70% {
      box-shadow:
        inset 0 0 40px 20px #d8a94f,
        0 20px 50px rgba(0,0,0,1);
    }
    100% {
      transform: rotateY(-180deg);
      box-shadow:
        inset 0 0 0 0 transparent,
        0 0 0 transparent;
    }
  }

</style>
</head>
<body>

<div class="book-container" id="bookContainer" aria-label="Old treasure map book, click to open">
  <div class="book-cover" id="bookCover" role="button" tabindex="0" aria-pressed="false" aria-label="Closed book cover, click to open">
    <div class="cover-text">Treasure Map</div>
  </div>
</div>

<script>
  const bookContainer = document.getElementById('bookContainer');
  const bookCover = document.getElementById('bookCover');

  let opened = false;

  bookCover.addEventListener('click', openBook);
  bookCover.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      openBook();
    }
  });

  function openBook() {
    if (opened) return;
    opened = true;

    // Clear container and build flipping book structure
    bookContainer.innerHTML = `
      <div class="book-flip" id="bookFlip">
        <div class="cover-front" id="coverFront" aria-hidden="true"></div>
        <div class="page-back" id="pageBack" aria-hidden="true">
          <div class="page-text" id="pageText" aria-label="Surprise message">
            I have a surprise for you, my pookie wookie dookie ðŸ˜šðŸ’–
          </div>
        </div>
      </div>
    `;

    const bookFlip = document.getElementById('bookFlip');
    const coverFront = document.getElementById('coverFront');
    const pageText = document.getElementById('pageText');

    // Start with coverFront facing front (no rotation)
    // Animate coverFront flipping right to left
    coverFront.classList.add('flipping');

    // After flip animation ends, reveal page text and animate mirror text flip
    coverFront.addEventListener('animationend', () => {
      coverFront.style.visibility = 'hidden';
      // Animate text flipping from mirror (scaleX(-1)) to normal (scaleX(1))
      pageText.style.transform = 'scaleX(1)';
    });
  }
</script>

</body>
</html>
